{"createdAt":"2025-06-18T01:55:25.394Z","updatedAt":"2025-07-03T07:26:55.000Z","id":"7NZK4FAJhzNntSln","name":"Multi Agent(Email Agent & Calendar Agent)","active":false,"isArchived":true,"nodes":[{"parameters":{"sendTo":"={{ $fromAI(\"emailAddress\") }}","subject":"={{ $fromAI(\"subject\") }}","message":"={{ $fromAI(\"emailBody\") }}","options":{"appendAttribution":false}},"type":"n8n-nodes-base.gmailTool","typeVersion":2.1,"position":[680,1360],"id":"81a9b582-a1d2-4540-8796-2a69085e4fa1","name":"Send Email","webhookId":"86c8c4b1-13bb-4ebe-acb9-30e1d7082d55","credentials":{"gmailOAuth2":{"id":"WQeEtFqzTJPbvZ66","name":"Gmail account"}}},{"parameters":{"operation":"getAll","limit":"={{ $fromAI(\"limit\",\"how many emails the user wants\") }}","simple":false,"filters":{"sender":"={{ $fromAI(\"sender\",\"who the emails are from\") }}"},"options":{}},"type":"n8n-nodes-base.gmailTool","typeVersion":2.1,"position":[800,1500],"id":"bb04bed1-4bf9-4f60-b603-26d61c1c8b77","name":"Get Emails","webhookId":"af4b3298-9037-44b0-aa12-2acbfbb5e66f","credentials":{"gmailOAuth2":{"id":"WQeEtFqzTJPbvZ66","name":"Gmail account"}}},{"parameters":{"resource":"draft","subject":"={{ $fromAI(\"subject\") }}","emailType":"html","message":"={{ $fromAI(\"emailBody\") }}","options":{"threadId":"={{ $fromAI(\"threadID\") }}","sendTo":"={{ $fromAI(\"emailAddress\") }}"}},"type":"n8n-nodes-base.gmailTool","typeVersion":2.1,"position":[680,1500],"id":"a5cc5443-0e90-4366-bc44-ff716ef95276","name":"Create Draft","webhookId":"17016bce-d7d7-428a-a56c-f6ea122db8be","credentials":{"gmailOAuth2":{"id":"WQeEtFqzTJPbvZ66","name":"Gmail account"}}},{"parameters":{"operation":"reply","messageId":"={{ $fromAI(\"ID\",\"the message ID\") }}","message":"={{ $fromAI(\"emailBody\") }}","options":{"appendAttribution":false}},"type":"n8n-nodes-base.gmailTool","typeVersion":2.1,"position":[800,1360],"id":"c00a889d-2b09-4f83-8341-813eb233b470","name":"Email Reply","webhookId":"114785e6-a859-432b-81b4-c490c1c35b1c","credentials":{"gmailOAuth2":{"id":"WQeEtFqzTJPbvZ66","name":"Gmail account"}}},{"parameters":{"resource":"label","returnAll":true},"type":"n8n-nodes-base.gmailTool","typeVersion":2.1,"position":[920,1500],"id":"4199b20f-16c8-47f1-8e9e-338f6347c440","name":"Get Labels","webhookId":"9e08b59e-792d-4566-83f1-9263c9ad86ae","credentials":{"gmailOAuth2":{"id":"WQeEtFqzTJPbvZ66","name":"Gmail account"}}},{"parameters":{"operation":"addLabels","messageId":"={{ $fromAI(\"ID\",\"the ID of the message\") }}","labelIds":"={{ $fromAI(\"labelID\") }}"},"type":"n8n-nodes-base.gmailTool","typeVersion":2.1,"position":[920,1360],"id":"f1074709-0e8b-4cac-b8cd-b2f897e5592e","name":"Label Emails","webhookId":"0e951529-2e6d-40bf-ac40-fc0947e242e2","credentials":{"gmailOAuth2":{"id":"WQeEtFqzTJPbvZ66","name":"Gmail account"}}},{"parameters":{"operation":"markAsUnread","messageId":"={{ $fromAI(\"messageID\") }}"},"type":"n8n-nodes-base.gmailTool","typeVersion":2.1,"position":[560,1500],"id":"032ebd54-ad40-4132-b093-d7d9830a830f","name":"Mark Unread","webhookId":"a35af9d8-f67d-4ff9-803f-59ec6356e795","credentials":{"gmailOAuth2":{"id":"WQeEtFqzTJPbvZ66","name":"Gmail account"}}},{"parameters":{"promptType":"define","text":"={{ $json.query }}","options":{"systemMessage":"=# 概要\nあなたはメール管理アシスタントです。すべてのメールはHTML形式でプロフェッショナルに作成し、署名は「Nate」としてください。\n\n**メール管理ツール**\n- **「Send Email（メール送信）」**: メールを送信するために使用します。\n- **「Create Draft（下書き作成）」**: ユーザーが下書きを依頼した場合に使用します。\n- **「Get Emails（メール取得）」**: 依頼に応じてメールを取得するために使用します。\n- **「Get Labels（ラベル取得）」**: ラベルを取得するために使用します。\n- **「Mark Unread（未読にする）」**: メールを未読としてマークするために使用します。この機能を使うには、まず「Get Emails」を使用して、対象メールのメッセージIDを取得する必要があります。\n- **「Label Email（メールにラベルを付ける）」**: メールにラベルを付けるために使用します。この機能を使うには、まず「Get Emails」で対象メールのメッセージIDを取得し、次に「Get Labels」でラベルIDを取得する必要があります。\n- **「Email Reply（メールに返信）」**: メールに返信するために使用します。この機能を使うには、まず「Get Emails」を使用して、返信したいメールのメッセージIDを取得する必要があります。\n\n## 最終注記\n- 現在の日付/時刻: {{ $now }}"}},"id":"4a2090ab-9030-4c7d-8fce-5c593e68f55f","name":"Email Agent1","type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.6,"position":[640,1160],"onError":"continueErrorOutput"},{"parameters":{"calendar":{"__rl":true,"value":"nateherk88@gmail.com","mode":"list","cachedResultName":"nateherk88@gmail.com"},"start":"={{ $fromAI(\"eventStart\") }}","end":"={{ $fromAI(\"eventEnd\") }}","additionalFields":{"attendees":["={{ $fromAI(\"eventAttendeeEmail\") }}"],"summary":"={{ $fromAI(\"eventTitle\") }}"}},"type":"n8n-nodes-base.googleCalendarTool","typeVersion":1.3,"position":[1420,1540],"id":"d00bafa4-5d66-4fc9-926e-e929785e20ce","name":"Create Event with Attendee","credentials":{"googleCalendarOAuth2Api":{"id":"RWBDOCdnjcMlP7IO","name":"Google Calendar account"}}},{"parameters":{"calendar":{"__rl":true,"value":"nateherk88@gmail.com","mode":"list","cachedResultName":"nateherk88@gmail.com"},"start":"={{ $fromAI(\"eventStart\") }}","end":"={{ $fromAI(\"eventEnd\") }}","additionalFields":{"attendees":[],"summary":"={{ $fromAI(\"eventTitle\") }}"}},"type":"n8n-nodes-base.googleCalendarTool","typeVersion":1.3,"position":[1300,1540],"id":"dbd22d61-c932-40e1-ac5c-e7a90266b23e","name":"Create Event","credentials":{"googleCalendarOAuth2Api":{"id":"RWBDOCdnjcMlP7IO","name":"Google Calendar account"}}},{"parameters":{"operation":"getAll","calendar":{"__rl":true,"value":"nateherk88@gmail.com","mode":"list","cachedResultName":"nateherk88@gmail.com"},"timeMin":"={{ $fromAI(\"dayBefore\",\"the day before the date the user requested\") }}","timeMax":"={{ $fromAI(\"dayAfter\",\"the day after the date the user requested\") }}","options":{}},"type":"n8n-nodes-base.googleCalendarTool","typeVersion":1.3,"position":[1180,1540],"id":"114aabed-f220-4dde-a8bb-681733d83b5f","name":"Get Events","credentials":{"googleCalendarOAuth2Api":{"id":"RWBDOCdnjcMlP7IO","name":"Google Calendar account"}}},{"parameters":{"operation":"delete","calendar":{"__rl":true,"value":"nateherk88@gmail.com","mode":"list","cachedResultName":"nateherk88@gmail.com"},"eventId":"={{ $fromAI(\"eventID\") }}","options":{}},"type":"n8n-nodes-base.googleCalendarTool","typeVersion":1.3,"position":[1420,1400],"id":"b14e43d5-3d0e-4b5f-bd71-8d6a3b5fce98","name":"Delete Event","credentials":{"googleCalendarOAuth2Api":{"id":"RWBDOCdnjcMlP7IO","name":"Google Calendar account"}}},{"parameters":{"operation":"update","calendar":{"__rl":true,"value":"nateherk88@gmail.com","mode":"list","cachedResultName":"nateherk88@gmail.com"},"eventId":"={{ $fromAI(\"eventID\") }}","updateFields":{"end":"={{ $fromAI(\"endTime\") }}","start":"={{ $fromAI(\"startTime\") }}"}},"type":"n8n-nodes-base.googleCalendarTool","typeVersion":1.3,"position":[1300,1400],"id":"d87785c7-dffc-4b3a-863b-c61ac6af4b6f","name":"Update Event","credentials":{"googleCalendarOAuth2Api":{"id":"RWBDOCdnjcMlP7IO","name":"Google Calendar account"}}},{"parameters":{"promptType":"define","text":"={{ $json.query }}","options":{"systemMessage":"=# 概要\nあなたはカレンダーアシスタントです。あなたの責務は、ユーザーのカレンダーでイベントの作成、取得、削除を行うことです。\n\n**カレンダー管理ツール**\n- **「Create Event with Attendee（出席者ありでイベント作成）」**: イベントに参加者が含まれる場合に使用します。\n- **「Create Event（イベント作成）」**: 自分一人のイベントの場合に使用します。\n- **「Get Events（イベント取得）」**: 依頼に応じてカレンダーの予定を取得するために使用します。\n- **「Delete Event（イベント削除）」**: イベントを削除するために使用します。この機能を使うには、まず「Get Events」を使用して、削除したいイベントのIDを取得する必要があります。\n- **「Update Event（イベント更新）」**: イベントを更新するために使用します。この機能を使うには、まず「Get Events」を使用して、更新したいイベントのIDを取得する必要があります。\n\n## 最終注記\n現在の日付/時刻: {{ $now }}\nイベントの所要時間が指定されていない場合は、1時間と想定してください。"}},"id":"d8e747e3-63d1-4fec-aa1e-986fa4074b25","name":"Calendar Agent1","type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.6,"position":[1200,1200],"onError":"continueErrorOutput"},{"parameters":{"promptType":"define","text":"={{ $json.chatInput }}","options":{"systemMessage":"=# 概要\nあなたは究極のパーソナルアシスタントです。あなたの仕事は、ユーザーのクエリを適切なツールに送信することです。メールを作成したり、要約を作成したりすることは決してせず、ただ適切なツールを呼び出すだけで構いません。\n\n## ツール\n- **Think（思考）**: 深く考えたり、行き詰まった場合に使用します。\n- **emailAgent**: メール関連のアクションを実行するために使用します。\n- **calendarAgent**: カレンダー関連のアクションを実行するために使用します。\n- **Tavily**: ウェブを検索するために使用します。\n\n## ルール\n- アクションによっては、最初に連絡先情報を調べる必要があります。以下のアクションについては、メールアドレスを取得し、それを必要とするエージェントに渡す必要があります。\n    - メールの送信\n    - メールの下書き作成\n    - 出席者を含むカレンダーイベントの作成\n\n## 指示\n1. ユーザーのリクエストに基づいて、必要なツールを呼び出します。\n2. 「Think」ツールを使用して、正しい手順を踏んだことを確認します。このツールは毎回呼び出す必要があります。\n\n## 例\n1.\n    - **入力**: ネイト・ハーケルマンに何時に出発したいか尋ねるメールを送信してください。\n    - **アクション**: `contactAgent` を使用してネイト・ハーケルマンのメールアドレスを取得します。\n    - **アクション**: `emailAgent` を使用してメールを送信します。その際、ツールには「ネイト・ハーケルマンに何時に出発したいか尋ねるメールを送信してください。彼のメールアドレスは次の通りです: [メールアドレス]」のようなクエリを渡します。\n    - **出力**: ネイト・ハーケルマンにメールが送信されました。他に何かお手伝いできることはありますか？\n\n## 最終確認事項\n現在の日付/時刻は次の通りです: {{ $now }}"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.7,"position":[920,720],"id":"1997aa67-e68c-4ff8-8bb8-3a658f01073a","name":"Ultimate Assistant"},{"parameters":{"name":"emailAgent","description":"Call this tool for any email actions.","workflowId":{"__rl":true,"value":"C3hLlOS4O6ZJtVFy","mode":"list","cachedResultName":"🤖Email Agent"},"workflowInputs":{"mappingMode":"defineBelow","value":{},"matchingColumns":[],"schema":[],"attemptToConvertTypes":false,"convertFieldsToString":false}},"type":"@n8n/n8n-nodes-langchain.toolWorkflow","typeVersion":2,"position":[920,1000],"id":"789c28dd-1ed1-49a4-8e03-56e6e4004fb8","name":"Email Agent"},{"parameters":{"toolDescription":"インターネット検索用のツール","method":"POST","url":"https://api.tavily.com/search","sendBody":true,"specifyBody":"json","jsonBody":"{\n    \"api_key\": \"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\",\n    \"query\": \"{searchTerm}\",\n    \"search_depth\": \"basic\",\n    \"include_answer\": true,\n    \"topic\": \"news\",\n    \"include_raw_content\": true,\n    \"max_results\": 3\n} ","placeholderDefinitions":{"values":[{"name":"searchTerm","description":"What the user has requested to search the internet for","type":"string"}]}},"type":"@n8n/n8n-nodes-langchain.toolHttpRequest","typeVersion":1.1,"position":[140,1120],"id":"a316ffc1-6c77-461d-aeaf-867266246a73","name":"Tavily"},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.toolCalculator","typeVersion":1,"position":[260,1120],"id":"c09f0bed-6316-4d63-a374-7238b6994915","name":"Calculator"},{"parameters":{"name":"calendarAgent","description":"Call this tool for any calendar action.","workflowId":{"__rl":true,"value":"0NtlJ41IozGhtFa6","mode":"list","cachedResultName":"🤖Calendar Agent"},"workflowInputs":{"mappingMode":"defineBelow","value":{},"matchingColumns":[],"schema":[],"attemptToConvertTypes":false,"convertFieldsToString":false}},"type":"@n8n/n8n-nodes-langchain.toolWorkflow","typeVersion":2,"position":[1500,1040],"id":"a65729ea-0471-4564-89b4-595ce906dcfd","name":"Calendar Agent"},{"parameters":{"content":"# Parent Agent\n\n","height":260,"width":420,"color":2},"type":"n8n-nodes-base.stickyNote","position":[840,620],"typeVersion":1,"id":"c4fdd661-31c9-411f-aa7f-1ba0218ed928","name":"Sticky Note"},{"parameters":{"description":"このツールは、何かについて考察するために使用します。\n新しい情報を取得したり、データベースを変更したりすることはなく、単に思考をログに追記するだけです。\n複雑な推論や、何らかのキャッシュメモリ（一時的な記憶）が必要な場合に使用してください。"},"type":"@n8n/n8n-nodes-langchain.toolThink","typeVersion":1,"position":[380,1120],"id":"cbe084b6-7f1b-4320-9afb-dad5e14c9c49","name":"Think"},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[340,980],"id":"17dfd9df-c4f9-437e-93c7-b2b0d910cda0","name":"Simple Memory"},{"parameters":{"content":"# Email Agent","height":700,"width":540},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[500,980],"id":"f64333b1-1860-4b55-a159-6aaafef52ce5","name":"Sticky Note1"},{"parameters":{"content":"# Calendar Agent","height":700,"width":540,"color":4},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[1100,980],"id":"cca4296f-24da-41b8-8ec8-c7e6ed521552","name":"Sticky Note2"},{"parameters":{"modelName":"models/gemini-2.5-flash","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[220,980],"id":"378fbd57-ecb4-4b6f-b224-2051bab6233c","name":"Google Gemini Chat Model","credentials":{"googlePalmApi":{"id":"pkkgMgQ2rSCnE7kR","name":"Google Gemini(PaLM) Api account"}}},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[620,720],"id":"7798b942-7d1a-48e2-b48d-3b6227de214a","name":"When chat message received","webhookId":"2d34914d-ac7d-44de-8b8f-37e252968af4"},{"parameters":{"modelName":"models/gemini-2.5-flash","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[560,1360],"id":"7aeee142-777d-4caf-bd1f-9b7e4437cb57","name":"Google Gemini Chat Model1","credentials":{"googlePalmApi":{"id":"pkkgMgQ2rSCnE7kR","name":"Google Gemini(PaLM) Api account"}}},{"parameters":{"modelName":"models/gemini-2.5-flash","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","typeVersion":1,"position":[1160,1380],"id":"2d917f67-9942-4179-bb0b-ab7bcdbacf16","name":"Google Gemini Chat Model2","credentials":{"googlePalmApi":{"id":"pkkgMgQ2rSCnE7kR","name":"Google Gemini(PaLM) Api account"}}}],"connections":{"Send Email":{"ai_tool":[[{"node":"Email Agent1","type":"ai_tool","index":0}]]},"Get Emails":{"ai_tool":[[{"node":"Email Agent1","type":"ai_tool","index":0}]]},"Create Draft":{"ai_tool":[[{"node":"Email Agent1","type":"ai_tool","index":0}]]},"Email Reply":{"ai_tool":[[{"node":"Email Agent1","type":"ai_tool","index":0}]]},"Get Labels":{"ai_tool":[[{"node":"Email Agent1","type":"ai_tool","index":0}]]},"Label Emails":{"ai_tool":[[{"node":"Email Agent1","type":"ai_tool","index":0}]]},"Mark Unread":{"ai_tool":[[{"node":"Email Agent1","type":"ai_tool","index":0}]]},"Create Event with Attendee":{"ai_tool":[[{"node":"Calendar Agent1","type":"ai_tool","index":0}]]},"Create Event":{"ai_tool":[[{"node":"Calendar Agent1","type":"ai_tool","index":0}]]},"Get Events":{"ai_tool":[[{"node":"Calendar Agent1","type":"ai_tool","index":0}]]},"Delete Event":{"ai_tool":[[{"node":"Calendar Agent1","type":"ai_tool","index":0}]]},"Update Event":{"ai_tool":[[{"node":"Calendar Agent1","type":"ai_tool","index":0}]]},"Ultimate Assistant":{"main":[[]]},"Email Agent":{"ai_tool":[[{"node":"Ultimate Assistant","type":"ai_tool","index":0}]]},"Tavily":{"ai_tool":[[{"node":"Ultimate Assistant","type":"ai_tool","index":0}]]},"Calculator":{"ai_tool":[[{"node":"Ultimate Assistant","type":"ai_tool","index":0}]]},"Calendar Agent":{"ai_tool":[[{"node":"Ultimate Assistant","type":"ai_tool","index":0}]]},"Think":{"ai_tool":[[{"node":"Ultimate Assistant","type":"ai_tool","index":0}]]},"Simple Memory":{"ai_memory":[[{"node":"Ultimate Assistant","type":"ai_memory","index":0}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"Ultimate Assistant","type":"ai_languageModel","index":0}]]},"When chat message received":{"main":[[{"node":"Ultimate Assistant","type":"main","index":0}]]},"Google Gemini Chat Model1":{"ai_languageModel":[[{"node":"Email Agent1","type":"ai_languageModel","index":0}]]},"Google Gemini Chat Model2":{"ai_languageModel":[[{"node":"Calendar Agent1","type":"ai_languageModel","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"4e0514c7-91b5-411e-8987-e842a45abb53","triggerCount":0,"tags":[{"createdAt":"2025-06-18T07:58:49.669Z","updatedAt":"2025-07-03T09:01:04.709Z","id":"w3Cnd8StpKPr7ekR","name":"on test"}]}